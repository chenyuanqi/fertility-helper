<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¤‡å­•åŠ©æ‰‹ - å›¾è¡¨</title>
  <link rel="stylesheet" href="../assets/css/common.css">
  <style>
    /* å›¾è¡¨é¡µé¢ç‰¹æœ‰æ ·å¼ */
    .chart-header {
      background: var(--surface);
      border-radius: var(--border-radius);
      padding: 16px;
      margin-bottom: var(--section-margin);
      box-shadow: var(--shadow-small);
    }
    
    .cycle-info-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .cycle-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .cycle-navigation {
      display: flex;
      gap: 8px;
    }
    
    .nav-btn {
      width: 32px;
      height: 32px;
      border: none;
      border-radius: 50%;
      background: var(--background);
      color: var(--text-secondary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }
    
    .nav-btn:hover {
      background: var(--border);
    }
    
    .cycle-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }
    
    .stat-item {
      text-align: center;
    }
    
    .stat-value {
      font-size: 20px;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 4px;
    }
    
    .stat-label {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    /* ä¸‰åˆä¸€å›¾è¡¨å®¹å™¨ */
    .chart-container {
      background: var(--surface);
      border-radius: var(--border-radius);
      padding: 16px;
      margin-bottom: var(--section-margin);
      box-shadow: var(--shadow-small);
      min-height: 400px;
      position: relative;
    }
    
    .chart-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .chart-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .chart-actions {
      display: flex;
      gap: 8px;
    }
    
    .chart-btn {
      padding: 6px 12px;
      border: 1px solid var(--border);
      background: var(--surface);
      border-radius: var(--border-radius-small);
      font-size: 12px;
      color: var(--text-secondary);
      cursor: pointer;
    }
    
    .chart-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    /* æ¨¡æ‹Ÿå›¾è¡¨ */
    .chart-mock {
      width: 100%;
      height: 300px;
      position: relative;
      background: linear-gradient(to bottom, #f8f9fa 0%, #f8f9fa 100%);
      border: 1px solid var(--border);
      border-radius: var(--border-radius-small);
      overflow: hidden;
    }
    
    /* Yè½´ï¼ˆä½“æ¸©ï¼‰ */
    .y-axis {
      position: absolute;
      left: 0;
      top: 0;
      width: 40px;
      height: 100%;
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 20px 0;
    }
    
    .y-axis-label {
      font-size: 10px;
      color: var(--text-secondary);
      text-align: center;
      transform: rotate(-90deg);
      width: 20px;
    }
    
    /* Xè½´ï¼ˆæ—¥æœŸï¼‰ */
    .x-axis {
      position: absolute;
      bottom: 0;
      left: 40px;
      right: 0;
      height: 30px;
      background: var(--surface);
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 10px;
    }
    
    .x-axis-label {
      font-size: 10px;
      color: var(--text-secondary);
    }
    
    /* å›¾è¡¨å†…å®¹åŒºåŸŸ */
    .chart-content {
      position: absolute;
      left: 40px;
      top: 0;
      right: 0;
      bottom: 30px;
      overflow: hidden;
    }
    
    /* ç»é‡èƒŒæ™¯ */
    .menstruation-background {
      position: absolute;
      top: 0;
      height: 100%;
      opacity: 0.3;
    }
    
    .menstruation-light {
      background: var(--menstruation-light);
    }
    
    .menstruation-medium {
      background: var(--menstruation-medium);
    }
    
    .menstruation-heavy {
      background: var(--menstruation-heavy);
    }
    
    /* è¦†ç›–çº¿ */
    .coverline {
      position: absolute;
      width: 100%;
      height: 1px;
      background: var(--temperature-coverline);
      border-top: 2px dashed var(--temperature-coverline);
      top: 60%;
    }
    
    /* ä½“æ¸©æŠ˜çº¿ */
    .temperature-line {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    
    .temperature-point {
      position: absolute;
      width: 8px;
      height: 8px;
      background: var(--primary-color);
      border: 2px solid white;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      cursor: pointer;
      z-index: 10;
    }
    
    .temperature-point.high-temp {
      background: var(--temperature-high);
    }
    
    .temperature-point.selected {
      background: var(--warning-color);
      transform: translate(-50%, -50%) scale(1.3);
    }
    
    /* åŒæˆ¿å›¾æ ‡ */
    .intimacy-marker {
      position: absolute;
      font-size: 16px;
      transform: translate(-50%, -50%);
      cursor: pointer;
      z-index: 5;
    }
    
    .intimacy-marker.recorded {
      color: var(--secondary-color);
    }
    
    .intimacy-marker.predicted {
      color: var(--warning-color);
    }
    
    /* æ’åµæ ‡è®° */
    .ovulation-marker {
      position: absolute;
      width: 20px;
      height: 20px;
      background: var(--ovulation-day);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: white;
      font-weight: 600;
      z-index: 8;
    }
    
    /* å›¾ä¾‹ */
    .chart-legend {
      background: var(--surface);
      border-radius: var(--border-radius);
      padding: 16px;
      margin-bottom: var(--section-margin);
      box-shadow: var(--shadow-small);
    }
    
    .legend-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
    }
    
    .legend-items {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    .legend-icon {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    
    .legend-icon.temperature {
      background: var(--primary-color);
    }
    
    .legend-icon.menstruation {
      background: var(--menstruation-medium);
    }
    
    .legend-icon.intimacy {
      background: var(--secondary-color);
    }
    
    .legend-icon.ovulation {
      background: var(--ovulation-day);
    }
    
    .legend-icon.coverline {
      background: var(--temperature-coverline);
      border-radius: 0;
      height: 2px;
    }
    
    /* æ•°æ®è¯¦æƒ… */
    .data-details {
      background: var(--surface);
      border-radius: var(--border-radius);
      padding: 16px;
      box-shadow: var(--shadow-small);
    }
    
    .details-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .selected-date {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .details-content {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }
    
    .detail-item {
      text-align: center;
    }
    
    .detail-value {
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 4px;
    }
    
    .detail-label {
      font-size: 12px;
      color: var(--text-secondary);
    }
  </style>
</head>
<body>
  <div class="mobile-container">
    <div class="page-container">
      <h1 class="page-title">ä½“æ¸©å›¾è¡¨</h1>
      
      <!-- å‘¨æœŸä¿¡æ¯å¤´éƒ¨ -->
      <div class="chart-header">
        <div class="cycle-info-header">
          <div class="cycle-title">å½“å‰å‘¨æœŸ - ç¬¬15å¤©</div>
          <div class="cycle-navigation">
            <button class="nav-btn" onclick="previousCycle()">â€¹</button>
            <button class="nav-btn" onclick="nextCycle()">â€º</button>
          </div>
        </div>
        
        <div class="cycle-stats">
          <div class="stat-item">
            <div class="stat-value">15</div>
            <div class="stat-label">å‘¨æœŸå¤©æ•°</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">36.5</div>
            <div class="stat-label">å¹³å‡ä½“æ¸©</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">1æœˆ24æ—¥</div>
            <div class="stat-label">é¢„è®¡æ’åµ</div>
          </div>
        </div>
      </div>

      <!-- å›¾è¡¨å®¹å™¨ -->
      <div class="chart-container">
        <div class="chart-controls">
          <div class="chart-title">ä¸‰åˆä¸€å›¾è¡¨</div>
          <div class="chart-actions">
            <button class="chart-btn active" onclick="toggleView('all')">å…¨éƒ¨</button>
            <button class="chart-btn" onclick="toggleView('temperature')">ä½“æ¸©</button>
            <button class="chart-btn" onclick="toggleView('zoom')">ç¼©æ”¾</button>
          </div>
        </div>
        
        <!-- æ¨¡æ‹Ÿå›¾è¡¨ -->
        <div class="chart-mock" id="chartArea">
          <!-- Yè½´ -->
          <div class="y-axis">
            <div class="y-axis-label">37.5</div>
            <div class="y-axis-label">37.0</div>
            <div class="y-axis-label">36.5</div>
            <div class="y-axis-label">36.0</div>
            <div class="y-axis-label">35.5</div>
          </div>
          
          <!-- Xè½´ -->
          <div class="x-axis">
            <div class="x-axis-label">10æ—¥</div>
            <div class="x-axis-label">15æ—¥</div>
            <div class="x-axis-label">20æ—¥</div>
            <div class="x-axis-label">25æ—¥</div>
            <div class="x-axis-label">30æ—¥</div>
          </div>
          
          <!-- å›¾è¡¨å†…å®¹ -->
          <div class="chart-content">
            <!-- ç»é‡èƒŒæ™¯ -->
            <div class="menstruation-background menstruation-medium" 
                 style="left: 0%; width: 20%;"></div>
            <div class="menstruation-background menstruation-light" 
                 style="left: 20%; width: 10%;"></div>
            
            <!-- è¦†ç›–çº¿ -->
            <div class="coverline"></div>
            
            <!-- ä½“æ¸©ç‚¹ -->
            <div class="temperature-line">
              <div class="temperature-point" style="left: 10%; top: 80%;" 
                   onclick="selectPoint(this, '1æœˆ11æ—¥', 36.3)"></div>
              <div class="temperature-point" style="left: 20%; top: 75%;" 
                   onclick="selectPoint(this, '1æœˆ12æ—¥', 36.4)"></div>
              <div class="temperature-point" style="left: 30%; top: 70%;" 
                   onclick="selectPoint(this, '1æœˆ13æ—¥', 36.5)"></div>
              <div class="temperature-point high-temp" style="left: 40%; top: 40%;" 
                   onclick="selectPoint(this, '1æœˆ14æ—¥', 36.9)"></div>
              <div class="temperature-point high-temp" style="left: 50%; top: 45%;" 
                   onclick="selectPoint(this, '1æœˆ15æ—¥', 36.8)"></div>
              <div class="temperature-point high-temp" style="left: 60%; top: 42%;" 
                   onclick="selectPoint(this, '1æœˆ16æ—¥', 36.85)"></div>
              <div class="temperature-point high-temp" style="left: 70%; top: 38%;" 
                   onclick="selectPoint(this, '1æœˆ17æ—¥', 36.95)"></div>
            </div>
            
            <!-- åŒæˆ¿æ ‡è®° -->
            <div class="intimacy-marker recorded" style="left: 25%; top: 90%;">ğŸ’•</div>
            <div class="intimacy-marker recorded" style="left: 45%; top: 90%;">ğŸ’•</div>
            <div class="intimacy-marker predicted" style="left: 65%; top: 90%;">ğŸ’•</div>
            
            <!-- æ’åµæ ‡è®° -->
            <div class="ovulation-marker" style="left: 55%; top: 20%;">O</div>
          </div>
        </div>
      </div>

      <!-- å›¾ä¾‹ -->
      <div class="chart-legend">
        <div class="legend-title">å›¾ä¾‹è¯´æ˜</div>
        <div class="legend-items">
          <div class="legend-item">
            <div class="legend-icon temperature"></div>
            <span>åŸºç¡€ä½“æ¸©</span>
          </div>
          <div class="legend-item">
            <div class="legend-icon menstruation"></div>
            <span>æœˆç»ç»é‡</span>
          </div>
          <div class="legend-item">
            <div class="legend-icon intimacy"></div>
            <span>åŒæˆ¿è®°å½•</span>
          </div>
          <div class="legend-item">
            <div class="legend-icon ovulation"></div>
            <span>æ’åµæ—¥</span>
          </div>
          <div class="legend-item">
            <div class="legend-icon coverline"></div>
            <span>è¦†ç›–çº¿</span>
          </div>
          <div class="legend-item">
            <span style="color: var(--warning-color);">ğŸ’•</span>
            <span>æ¨èåŒæˆ¿</span>
          </div>
        </div>
      </div>

      <!-- é€‰ä¸­ç‚¹çš„è¯¦ç»†ä¿¡æ¯ -->
      <div class="data-details" id="dataDetails" style="display: none;">
        <div class="details-header">
          <div class="selected-date" id="selectedDate">1æœˆ15æ—¥</div>
          <button class="chart-btn" onclick="closeDetails()">Ã—</button>
        </div>
        <div class="details-content">
          <div class="detail-item">
            <div class="detail-value" id="detailTemperature">36.8Â°C</div>
            <div class="detail-label">åŸºç¡€ä½“æ¸©</div>
          </div>
          <div class="detail-item">
            <div class="detail-value" id="detailMenstruation">æ— </div>
            <div class="detail-label">æœˆç»ç»é‡</div>
          </div>
          <div class="detail-item">
            <div class="detail-value" id="detailIntimacy">1æ¬¡</div>
            <div class="detail-label">åŒæˆ¿æ¬¡æ•°</div>
          </div>
        </div>
      </div>
    </div>

    <!-- TabBar å¯¼èˆª -->
    <div class="tabbar">
      <a href="index.html" class="tab-item" data-page="index">
        <div class="tab-icon">ğŸ </div>
        <div>é¦–é¡µ</div>
      </a>
      <a href="record.html" class="tab-item" data-page="record">
        <div class="tab-icon">ğŸ“</div>
        <div>è®°å½•</div>
      </a>
      <a href="chart.html" class="tab-item active" data-page="chart">
        <div class="tab-icon">ğŸ“Š</div>
        <div>å›¾è¡¨</div>
      </a>
      <a href="calendar.html" class="tab-item" data-page="calendar">
        <div class="tab-icon">ğŸ“…</div>
        <div>æ—¥å†</div>
      </a>
      <a href="settings.html" class="tab-item" data-page="settings">
        <div class="tab-icon">âš™ï¸</div>
        <div>è®¾ç½®</div>
      </a>
    </div>
  </div>

  <script src="../assets/js/common.js"></script>
  <script>
    let selectedPoint = null;

    // ç‚¹å‡»ä½“æ¸©ç‚¹
    function selectPoint(element, date, temperature) {
      // ç§»é™¤ä¹‹å‰é€‰ä¸­çš„ç‚¹
      if (selectedPoint) {
        selectedPoint.classList.remove('selected');
      }
      
      // é€‰ä¸­å½“å‰ç‚¹
      element.classList.add('selected');
      selectedPoint = element;
      
      // æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
      showDetails(date, temperature);
    }

    // æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
    function showDetails(date, temperature) {
      const details = document.getElementById('dataDetails');
      const selectedDate = document.getElementById('selectedDate');
      const detailTemperature = document.getElementById('detailTemperature');
      const detailMenstruation = document.getElementById('detailMenstruation');
      const detailIntimacy = document.getElementById('detailIntimacy');
      
      selectedDate.textContent = date;
      detailTemperature.textContent = temperature + 'Â°C';
      
      // æ¨¡æ‹Ÿè·å–å¯¹åº”æ—¥æœŸçš„å…¶ä»–æ•°æ®
      detailMenstruation.textContent = 'æ— ';
      detailIntimacy.textContent = Math.random() > 0.5 ? '1æ¬¡' : 'æ— ';
      
      details.style.display = 'block';
      details.scrollIntoView({ behavior: 'smooth' });
    }

    // å…³é—­è¯¦ç»†ä¿¡æ¯
    function closeDetails() {
      const details = document.getElementById('dataDetails');
      details.style.display = 'none';
      
      if (selectedPoint) {
        selectedPoint.classList.remove('selected');
        selectedPoint = null;
      }
    }

    // åˆ‡æ¢è§†å›¾
    function toggleView(view) {
      const buttons = document.querySelectorAll('.chart-btn');
      buttons.forEach(btn => btn.classList.remove('active'));
      
      event.target.classList.add('active');
      
      // è¿™é‡Œå¯ä»¥å®ç°ä¸åŒçš„è§†å›¾åˆ‡æ¢é€»è¾‘
      console.log('åˆ‡æ¢åˆ°è§†å›¾:', view);
      
      switch(view) {
        case 'all':
          Toast.show('æ˜¾ç¤ºå®Œæ•´å›¾è¡¨', 'info', 1000);
          break;
        case 'temperature':
          Toast.show('ä»…æ˜¾ç¤ºä½“æ¸©æ›²çº¿', 'info', 1000);
          break;
        case 'zoom':
          Toast.show('ç¼©æ”¾æ¨¡å¼', 'info', 1000);
          break;
      }
    }

    // å‘¨æœŸå¯¼èˆª
    function previousCycle() {
      Toast.show('åˆ‡æ¢åˆ°ä¸Šä¸€å‘¨æœŸ', 'info', 1000);
      // è¿™é‡Œå®ç°åˆ‡æ¢åˆ°ä¸Šä¸€å‘¨æœŸçš„é€»è¾‘
    }

    function nextCycle() {
      Toast.show('åˆ‡æ¢åˆ°ä¸‹ä¸€å‘¨æœŸ', 'info', 1000);
      // è¿™é‡Œå®ç°åˆ‡æ¢åˆ°ä¸‹ä¸€å‘¨æœŸçš„é€»è¾‘
    }

    // æ¨¡æ‹Ÿè¿æ¥ä½“æ¸©ç‚¹çš„çº¿æ¡
    document.addEventListener('DOMContentLoaded', function() {
      drawTemperatureLine();
    });

    function drawTemperatureLine() {
      // è¿™é‡Œå¯ä»¥ä½¿ç”¨Canvasæˆ–SVGç»˜åˆ¶è¿æ¥çº¿
      // ä¸ºäº†ç®€åŒ–åŸå‹ï¼Œæˆ‘ä»¬ä½¿ç”¨CSSæ¥æ¨¡æ‹Ÿ
      console.log('ç»˜åˆ¶ä½“æ¸©è¿æ¥çº¿');
    }
  </script>
</body>
</html> 