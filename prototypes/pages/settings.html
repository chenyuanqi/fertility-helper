<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¤‡å°å­• - è®¾ç½®</title>
  <link rel="stylesheet" href="../assets/css/common.css">
  <style>
    /* è®¾ç½®é¡µé¢ç‰¹æœ‰æ ·å¼ */
    .profile-section {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-radius: var(--border-radius);
      padding: 24px;
      margin-bottom: var(--section-margin);
      text-align: center;
    }
    
    .profile-avatar {
      width: 60px;
      height: 60px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      margin: 0 auto 12px;
    }
    
    .profile-name {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .profile-stats {
      display: flex;
      justify-content: space-between;
      opacity: 0.9;
      font-size: 14px;
    }
    
    .settings-group {
      background: var(--surface);
      border-radius: var(--border-radius);
      margin-bottom: var(--section-margin);
      box-shadow: var(--shadow-small);
      overflow: hidden;
    }
    
    .group-header {
      padding: 16px 20px;
      background: var(--background);
      border-bottom: 1px solid var(--border);
    }
    
    .group-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .group-description {
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: 4px;
    }
    
    .settings-item {
      display: flex;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .settings-item:last-child {
      border-bottom: none;
    }
    
    .settings-item:hover {
      background: var(--background);
    }
    
    .settings-item.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .item-icon {
      font-size: 20px;
      margin-right: 12px;
      width: 24px;
      text-align: center;
    }
    
    .item-content {
      flex: 1;
    }
    
    .item-title {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
      margin-bottom: 2px;
    }
    
    .item-description {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    .item-value {
      font-size: 14px;
      color: var(--text-secondary);
      margin-right: 8px;
    }
    
    .item-arrow {
      color: var(--text-disabled);
      font-size: 12px;
    }
    
    /* å¼€å…³æ§ä»¶ */
    .switch {
      position: relative;
      width: 44px;
      height: 24px;
      background: var(--border);
      border-radius: 12px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .switch.active {
      background: var(--primary-color);
    }
    
    .switch-thumb {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: transform 0.2s;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }
    
    .switch.active .switch-thumb {
      transform: translateX(20px);
    }
    
    /* ç‰ˆæœ¬ä¿¡æ¯ */
    .version-info {
      text-align: center;
      padding: 20px;
      color: var(--text-secondary);
      font-size: 12px;
    }
    
    .version-number {
      margin-bottom: 8px;
    }
    
    .copyright {
      opacity: 0.7;
    }
    
    /* æ¨¡æ€æ¡†ç‰¹å®šæ ·å¼ */
    .input-modal .modal-content {
      text-align: left;
    }
    
    .input-group {
      margin-bottom: 16px;
    }
    
    .input-label {
      display: block;
      font-size: 14px;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    
    .time-selector {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .time-input {
      flex: 1;
    }
    
    /* æ•°æ®ç»Ÿè®¡å¡ç‰‡ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      padding: 16px 20px;
    }
    
    .stat-card {
      text-align: center;
      padding: 16px;
      background: var(--background);
      border-radius: var(--border-radius-small);
    }
    
    .stat-number {
      font-size: 24px;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 4px;
    }
    
    .stat-label {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    /* å±é™©æ“ä½œ */
    .danger-section .settings-item {
      color: var(--error-color);
    }
    
    .danger-section .item-icon {
      color: var(--error-color);
    }
  </style>
</head>
<body>
  <div class="mobile-container">
    <div class="page-container">
      <h1 class="page-title">è®¾ç½®</h1>
      
      <!-- ä¸ªäººèµ„æ–™ -->
      <div class="profile-section">
        <div class="profile-avatar">ğŸ‘¤</div>
        <div class="profile-name">å°æ˜</div>
        <div class="profile-stats">
          <span>å·²ä½¿ç”¨ 15 å¤©</span>
          <span>è®°å½• 12 æ¬¡</span>
          <span>å‘¨æœŸ 1 ä¸ª</span>
        </div>
      </div>

      <!-- ä¸ªäººä¿¡æ¯ -->
      <div class="settings-group">
        <div class="group-header">
          <div class="group-title">ä¸ªäººä¿¡æ¯</div>
          <div class="group-description">è®¾ç½®ä¸ªäººåŸºæœ¬ä¿¡æ¯å’Œå‘¨æœŸå‚æ•°</div>
        </div>
        
        <div class="settings-item" onclick="editNickname()">
          <div class="item-icon">ğŸ‘¤</div>
          <div class="item-content">
            <div class="item-title">æ˜µç§°</div>
            <div class="item-description">è®¾ç½®æ˜¾ç¤ºæ˜µç§°</div>
          </div>
          <div class="item-value" id="nicknameValue">å°æ˜</div>
          <div class="item-arrow">â€º</div>
        </div>
        
        <div class="settings-item" onclick="editCycleLength()">
          <div class="item-icon">ğŸ“…</div>
          <div class="item-content">
            <div class="item-title">å¹³å‡å‘¨æœŸé•¿åº¦</div>
            <div class="item-description">ç”¨äºæ’åµé¢„æµ‹è®¡ç®—</div>
          </div>
          <div class="item-value" id="cycleLengthValue">28å¤©</div>
          <div class="item-arrow">â€º</div>
        </div>
        
        <div class="settings-item" onclick="editLutealPhase()">
          <div class="item-icon">ğŸŒ™</div>
          <div class="item-content">
            <div class="item-title">é»„ä½“æœŸé•¿åº¦</div>
            <div class="item-description">æ’åµååˆ°æœˆç»çš„å¤©æ•°</div>
          </div>
          <div class="item-value" id="lutealPhaseValue">14å¤©</div>
          <div class="item-arrow">â€º</div>
        </div>
      </div>

      <!-- æé†’è®¾ç½® -->
      <div class="settings-group">
        <div class="group-header">
          <div class="group-title">æé†’è®¾ç½®</div>
          <div class="group-description">è®¾ç½®å„ç§æé†’é€šçŸ¥</div>
        </div>
        
        <div class="settings-item">
          <div class="item-icon">ğŸ””</div>
          <div class="item-content">
            <div class="item-title">æ™¨èµ·æµ‹æ¸©æé†’</div>
            <div class="item-description">æ¯å¤©æ—©ä¸Šæé†’æµ‹é‡ä½“æ¸©</div>
          </div>
          <div class="switch" onclick="toggleSwitch(this, 'morningReminder')">
            <div class="switch-thumb"></div>
          </div>
        </div>
        
        <div class="settings-item" onclick="setReminderTime()">
          <div class="item-icon">â°</div>
          <div class="item-content">
            <div class="item-title">æé†’æ—¶é—´</div>
            <div class="item-description">è®¾ç½®æµ‹æ¸©æé†’æ—¶é—´</div>
          </div>
          <div class="item-value" id="reminderTimeValue">07:00</div>
          <div class="item-arrow">â€º</div>
        </div>
        
        <div class="settings-item">
          <div class="item-icon">ğŸ’•</div>
          <div class="item-content">
            <div class="item-title">æ˜“å­•æœŸæé†’</div>
            <div class="item-description">åœ¨æ˜“å­•æœŸå‰æé†’</div>
          </div>
          <div class="switch active" onclick="toggleSwitch(this, 'fertilityReminder')">
            <div class="switch-thumb"></div>
          </div>
        </div>
        
        <div class="settings-item">
          <div class="item-icon">ğŸ¯</div>
          <div class="item-content">
            <div class="item-title">æ’åµæ—¥æé†’</div>
            <div class="item-description">é¢„æµ‹æ’åµæ—¥å½“å¤©æé†’</div>
          </div>
          <div class="switch active" onclick="toggleSwitch(this, 'ovulationReminder')">
            <div class="switch-thumb"></div>
          </div>
        </div>
      </div>

      <!-- æ•°æ®ç®¡ç† -->
      <div class="settings-group">
        <div class="group-header">
          <div class="group-title">æ•°æ®ç®¡ç†</div>
          <div class="group-description">ç®¡ç†æ‚¨çš„æ•°æ®å’Œéšç§</div>
        </div>
        
        <!-- æ•°æ®ç»Ÿè®¡ -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number">12</div>
            <div class="stat-label">è®°å½•å¤©æ•°</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">1</div>
            <div class="stat-label">å®Œæ•´å‘¨æœŸ</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">8</div>
            <div class="stat-label">ä½“æ¸©è®°å½•</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">3</div>
            <div class="stat-label">åŒæˆ¿è®°å½•</div>
          </div>
        </div>
        
        <div class="settings-item" onclick="exportData()">
          <div class="item-icon">ğŸ“¤</div>
          <div class="item-content">
            <div class="item-title">å¯¼å‡ºæ•°æ®</div>
            <div class="item-description">å¯¼å‡ºæ‰€æœ‰è®°å½•æ•°æ®</div>
          </div>
          <div class="item-arrow">â€º</div>
        </div>
        
        <div class="settings-item" onclick="importData()">
          <div class="item-icon">ğŸ“¥</div>
          <div class="item-content">
            <div class="item-title">å¯¼å…¥æ•°æ®</div>
            <div class="item-description">ä»å¤‡ä»½æ–‡ä»¶å¯¼å…¥æ•°æ®</div>
          </div>
          <div class="item-arrow">â€º</div>
        </div>
        
        <div class="settings-item" onclick="generateReport()">
          <div class="item-icon">ğŸ“Š</div>
          <div class="item-content">
            <div class="item-title">ç”ŸæˆæŠ¥å‘Š</div>
            <div class="item-description">ç”Ÿæˆå‘¨æœŸåˆ†ææŠ¥å‘Š</div>
          </div>
          <div class="item-arrow">â€º</div>
        </div>
      </div>

      <!-- åº”ç”¨è®¾ç½® -->
      <div class="settings-group">
        <div class="group-header">
          <div class="group-title">åº”ç”¨è®¾ç½®</div>
          <div class="group-description">åº”ç”¨ç›¸å…³è®¾ç½®å’Œä¿¡æ¯</div>
        </div>
        
        <div class="settings-item" onclick="checkUpdate()">
          <div class="item-icon">ğŸ”„</div>
          <div class="item-content">
            <div class="item-title">æ£€æŸ¥æ›´æ–°</div>
            <div class="item-description">æŸ¥çœ‹æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬</div>
          </div>
          <div class="item-value">v1.0.0</div>
          <div class="item-arrow">â€º</div>
        </div>
        
        <div class="settings-item" onclick="showHelp()">
          <div class="item-icon">â“</div>
          <div class="item-content">
            <div class="item-title">ä½¿ç”¨å¸®åŠ©</div>
            <div class="item-description">æŸ¥çœ‹ä½¿ç”¨è¯´æ˜</div>
          </div>
          <div class="item-arrow">â€º</div>
        </div>
        
        <div class="settings-item" onclick="showPrivacy()">
          <div class="item-icon">ğŸ”’</div>
          <div class="item-content">
            <div class="item-title">éšç§æ”¿ç­–</div>
            <div class="item-description">æŸ¥çœ‹éšç§ä¿æŠ¤è¯´æ˜</div>
          </div>
          <div class="item-arrow">â€º</div>
        </div>
        
        <div class="settings-item" onclick="contactUs()">
          <div class="item-icon">ğŸ“§</div>
          <div class="item-content">
            <div class="item-title">è”ç³»æˆ‘ä»¬</div>
            <div class="item-description">åé¦ˆé—®é¢˜å’Œå»ºè®®</div>
          </div>
          <div class="item-arrow">â€º</div>
        </div>
      </div>

      <!-- å±é™©æ“ä½œ -->
      <div class="settings-group danger-section">
        <div class="group-header">
          <div class="group-title" style="color: var(--error-color);">å±é™©æ“ä½œ</div>
          <div class="group-description">è¯·è°¨æ…æ“ä½œï¼Œæ“ä½œåæ— æ³•æ¢å¤</div>
        </div>
        
        <div class="settings-item" onclick="clearAllData()">
          <div class="item-icon">ğŸ—‘ï¸</div>
          <div class="item-content">
            <div class="item-title">æ¸…ç©ºæ‰€æœ‰æ•°æ®</div>
            <div class="item-description">åˆ é™¤æ‰€æœ‰è®°å½•å’Œè®¾ç½®</div>
          </div>
          <div class="item-arrow">â€º</div>
        </div>
      </div>

      <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
      <div class="version-info">
        <div class="version-number">å¤‡å°å­• v1.0.0</div>
        <div class="copyright">Â© 2024 å¤‡å°å­•å›¢é˜Ÿ</div>
      </div>
    </div>

    <!-- TabBar å¯¼èˆª -->
    <div class="tabbar">
      <a href="index.html" class="tab-item" data-page="index">
        <div class="tab-icon">ğŸ </div>
        <div>é¦–é¡µ</div>
      </a>
      <a href="record.html" class="tab-item" data-page="record">
        <div class="tab-icon">ğŸ“</div>
        <div>è®°å½•</div>
      </a>
      <a href="chart.html" class="tab-item" data-page="chart">
        <div class="tab-icon">ğŸ“Š</div>
        <div>å›¾è¡¨</div>
      </a>
      <a href="calendar.html" class="tab-item" data-page="calendar">
        <div class="tab-icon">ğŸ“…</div>
        <div>æ—¥å†</div>
      </a>
      <a href="settings.html" class="tab-item active" data-page="settings">
        <div class="tab-icon">âš™ï¸</div>
        <div>è®¾ç½®</div>
      </a>
    </div>

    <!-- è¾“å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="inputModal">
      <div class="modal-content input-modal">
        <div class="modal-title" id="modalTitle">ç¼–è¾‘è®¾ç½®</div>
        <div id="modalBody">
          <!-- åŠ¨æ€å†…å®¹ -->
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" onclick="closeInputModal()">å–æ¶ˆ</button>
          <button class="btn btn-primary" onclick="saveInput()">ä¿å­˜</button>
        </div>
      </div>
    </div>
  </div>

  <script src="../assets/js/common.js"></script>
  <script>
    let currentInputType = '';
    let inputModal = null;

    document.addEventListener('DOMContentLoaded', function() {
      inputModal = new Modal('inputModal');
    });

    // å¼€å…³åˆ‡æ¢
    function toggleSwitch(element, type) {
      element.classList.toggle('active');
      
      const isActive = element.classList.contains('active');
      console.log(`${type}: ${isActive ? 'å¼€å¯' : 'å…³é—­'}`);
      
      Toast.success(isActive ? 'å·²å¼€å¯' : 'å·²å…³é—­');
    }

    // ç¼–è¾‘æ˜µç§°
    function editNickname() {
      currentInputType = 'nickname';
      showInputModal('ç¼–è¾‘æ˜µç§°', `
        <div class="input-group">
          <label class="input-label">æ˜µç§°</label>
          <input type="text" class="input-field" id="inputValue" value="å°æ˜" maxlength="10">
        </div>
      `);
    }

    // ç¼–è¾‘å‘¨æœŸé•¿åº¦
    function editCycleLength() {
      currentInputType = 'cycleLength';
      showInputModal('ç¼–è¾‘å‘¨æœŸé•¿åº¦', `
        <div class="input-group">
          <label class="input-label">å¹³å‡å‘¨æœŸé•¿åº¦ï¼ˆå¤©ï¼‰</label>
          <input type="number" class="input-field" id="inputValue" value="28" min="20" max="40">
          <small style="color: var(--text-secondary); font-size: 12px;">æ­£å¸¸èŒƒå›´ï¼š20-40å¤©</small>
        </div>
      `);
    }

    // ç¼–è¾‘é»„ä½“æœŸé•¿åº¦
    function editLutealPhase() {
      currentInputType = 'lutealPhase';
      showInputModal('ç¼–è¾‘é»„ä½“æœŸé•¿åº¦', `
        <div class="input-group">
          <label class="input-label">é»„ä½“æœŸé•¿åº¦ï¼ˆå¤©ï¼‰</label>
          <input type="number" class="input-field" id="inputValue" value="14" min="10" max="16">
          <small style="color: var(--text-secondary); font-size: 12px;">æ­£å¸¸èŒƒå›´ï¼š10-16å¤©</small>
        </div>
      `);
    }

    // è®¾ç½®æé†’æ—¶é—´
    function setReminderTime() {
      currentInputType = 'reminderTime';
      showInputModal('è®¾ç½®æé†’æ—¶é—´', `
        <div class="input-group">
          <label class="input-label">æ™¨èµ·æµ‹æ¸©æé†’æ—¶é—´</label>
          <input type="time" class="input-field" id="inputValue" value="07:00">
        </div>
      `);
    }

    // æ˜¾ç¤ºè¾“å…¥æ¨¡æ€æ¡†
    function showInputModal(title, body) {
      document.getElementById('modalTitle').textContent = title;
      document.getElementById('modalBody').innerHTML = body;
      inputModal.show();
    }

    // å…³é—­è¾“å…¥æ¨¡æ€æ¡†
    function closeInputModal() {
      inputModal.hide();
    }

    // ä¿å­˜è¾“å…¥
    function saveInput() {
      const inputValue = document.getElementById('inputValue').value;
      
      if (!inputValue.trim()) {
        Toast.error('è¯·è¾“å…¥æœ‰æ•ˆå€¼');
        return;
      }
      
      switch(currentInputType) {
        case 'nickname':
          document.getElementById('nicknameValue').textContent = inputValue;
          Toast.success('æ˜µç§°å·²æ›´æ–°');
          break;
        case 'cycleLength':
          if (inputValue < 20 || inputValue > 40) {
            Toast.error('å‘¨æœŸé•¿åº¦åº”åœ¨20-40å¤©ä¹‹é—´');
            return;
          }
          document.getElementById('cycleLengthValue').textContent = inputValue + 'å¤©';
          Toast.success('å‘¨æœŸé•¿åº¦å·²æ›´æ–°');
          break;
        case 'lutealPhase':
          if (inputValue < 10 || inputValue > 16) {
            Toast.error('é»„ä½“æœŸé•¿åº¦åº”åœ¨10-16å¤©ä¹‹é—´');
            return;
          }
          document.getElementById('lutealPhaseValue').textContent = inputValue + 'å¤©';
          Toast.success('é»„ä½“æœŸé•¿åº¦å·²æ›´æ–°');
          break;
        case 'reminderTime':
          document.getElementById('reminderTimeValue').textContent = inputValue;
          Toast.success('æé†’æ—¶é—´å·²æ›´æ–°');
          break;
      }
      
      inputModal.hide();
    }

    // å¯¼å‡ºæ•°æ®
    function exportData() {
      Toast.show('æ­£åœ¨å‡†å¤‡å¯¼å‡ºæ•°æ®...', 'info', 2000);
      
      setTimeout(() => {
        // æ¨¡æ‹Ÿå¯¼å‡ºè¿‡ç¨‹
        const exportData = {
          version: '1.0.0',
          exportDate: new Date().toISOString(),
          userConfig: mockData.user,
          records: mockData.records,
          statistics: {
            totalRecords: mockData.records.length,
            totalCycles: 1
          }
        };
        
        console.log('å¯¼å‡ºçš„æ•°æ®:', exportData);
        Toast.success('æ•°æ®å¯¼å‡ºæˆåŠŸ');
      }, 1000);
    }

    // å¯¼å…¥æ•°æ®
    function importData() {
      // æ¨¡æ‹Ÿæ–‡ä»¶é€‰æ‹©
      Toast.show('è¯·é€‰æ‹©å¤‡ä»½æ–‡ä»¶', 'info', 1000);
      
      setTimeout(() => {
        Toast.success('æ•°æ®å¯¼å…¥æˆåŠŸ');
      }, 1500);
    }

    // ç”ŸæˆæŠ¥å‘Š
    function generateReport() {
      Toast.show('æ­£åœ¨ç”Ÿæˆå‘¨æœŸåˆ†ææŠ¥å‘Š...', 'info', 2000);
      
      setTimeout(() => {
        Toast.success('æŠ¥å‘Šç”ŸæˆæˆåŠŸï¼Œå·²ä¿å­˜åˆ°ç›¸å†Œ');
      }, 1500);
    }

    // æ£€æŸ¥æ›´æ–°
    function checkUpdate() {
      Toast.show('æ­£åœ¨æ£€æŸ¥æ›´æ–°...', 'info', 1000);
      
      setTimeout(() => {
        Toast.success('å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬');
      }, 1000);
    }

    // æ˜¾ç¤ºå¸®åŠ©
    function showHelp() {
      Toast.show('æ‰“å¼€ä½¿ç”¨å¸®åŠ©é¡µé¢', 'info', 1000);
    }

    // æ˜¾ç¤ºéšç§æ”¿ç­–
    function showPrivacy() {
      Toast.show('æ‰“å¼€éšç§æ”¿ç­–é¡µé¢', 'info', 1000);
    }

    // è”ç³»æˆ‘ä»¬
    function contactUs() {
      Toast.show('æ‰“å¼€è”ç³»æ–¹å¼', 'info', 1000);
    }

    // æ¸…ç©ºæ‰€æœ‰æ•°æ®
    function clearAllData() {
      if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼')) {
        Toast.show('æ­£åœ¨æ¸…ç©ºæ•°æ®...', 'warning', 1000);
        
        setTimeout(() => {
          Toast.success('æ‰€æœ‰æ•°æ®å·²æ¸…ç©º');
        }, 1000);
      }
    }
  </script>
</body>
</html> 